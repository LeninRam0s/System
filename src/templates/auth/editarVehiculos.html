{% extends './base_Menu.html'%}

{% block title %}Delitos contra el Patrimonio{% endblock %}

{% block customCSS %}
<link rel="stylesheet"
    href="{{ url_for('static', filename='css/incidencia.css')}}">

{% endblock %}

{% block body %}

<div
    class="container">

    <div class="formulario">

        <p style="text-align:center;">
            <img src="{{ url_for('static', filename='img/vehiculo.png') }}"
                alt="Imagen de Usuario" width="250" height="80">
        </p>
        <h2>Editar Vehículos y Motocicletas Robadas</h2>

        <form class="form-signin" id="Registro"
            action="/editarV/{{vehiculos.Id}}"
            method="POST">
            <!-- Primer Fila -->
            <div class="form-row">
                <div class="col-md-3">
                    <div class="form-floating">
                        <input type="date" class="form-control"
                            id="floatingInput" name="txtFecha"
                            value="{{vehiculos.Fecha}}" required>
                        <label for="floatingInput">Fecha <span
                                class="text-danger">*</span></label>
                        <div class="invalid-feedback">Seleccione una fecha
                            válida.</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="form-floating">
                        <input type="time" class="form-control"
                            id="floatingHora" name="txtHora"
                            value="{{vehiculos.Hora}}" required>
                        <label for="floatingHora">Hora <span class="text-danger">*</span></label>
                        <div class="invalid-feedback">Ingrese una hora válida.</div>
                    </div>

                </div>
                <div class="col-md-3">
                    <div class="form-floating">
                        <input type="text" class="form-control"
                            id="floatingDireccion" name="txtDireccion"
                            value="{{vehiculos.Direccion}}"
                            placeholder="Ejemplo: Calle 123, Ciudad"
                            pattern="^[A-Za-z0-9\s,'-]*$" required>
                        <label for="floatingDireccion">Dirección <span
                                class="text-danger">*</span></label>
                        <div class="invalid-feedback">Ingrese una dirección
                            válida.</div>
                    </div>

                </div>
            </div>
            <!-- Segunda Fila -->
            <div class="form-row">
                <div class="col-md-3">
                    <div class="form-floating">
                        <input type="text" class="form-control"
                            id="floatingCoordenadas" name="txtCoordenadas"
                            value="{{vehiculos.Coordenadas}}"
                            placeholder="Ejemplo: 14.634915, -90.506882"
                            pattern="^([1-8]?\d(\.\d+)?|90(\.0+)?),\s*-\d{1,3}(\.\d+)?$"
                            required>
                        <label for="floatingCoordenadas">Coordenadas (Latitud,
                            Longitud) <span class="text-danger">*</span></label>
                        <div class="invalid-feedback">Ingrese coordenadas
                            válidas en el formato: latitud, longitud (por
                            ejemplo, 14.634915, -90.506882).</div>
                    </div>

                </div>
                <div class="col-md-3">
                    <div class="form-floating">
                        <input type="text" class="form-control"
                            id="floatingNombreCompleto" name="txtNombre"
                            value="{{vehiculos.Nombre}}"
                            placeholder="Ejemplo: Juan Pérez"
                            pattern="^[A-Za-záéíóúÁÉÍÓÚñÑ\s]+$"
                            required>
                        <label for="floatingNombreCompleto">Nombre Completo
                            <span class="text-danger">*</span></label>
                        <div class="invalid-feedback">Ingrese un nombre completo
                            válido (nombres y apellidos).</div>
                    </div>

                </div>
                <div class="col-md-3">
                    <div class="form-floating">
                        <input type="text" class="form-control"
                            id="floatingEdad" name="txtEdad"
                            value="{{vehiculos.Edad}}"
                            placeholder="Ejemplo: 25"
                            pattern="^\d+$"
                            required>
                        <label for="floatingEdad">Edad <span class="text-danger">*</span></label>
                        <div class="invalid-feedback">Ingrese la edad en años.
                            Ej. 18, si es menor a 6 meses o se desconoce
                            ingresar 0 y si es mayora a 6 meses 1.</div>
                    </div>

                </div>
            </div>
            <!-- Tercer Fila -->
            <div class="form-row ">
                <div class="col-md-3">
                    <div class="form-floating">
                        <select class="form-select" id="floatingSexo"
                            name="txtSexo" required>
                            <option value disabled>Seleccionar Género</option>
                            <option value="Masculino">Masculino</option>
                            <option value="Femenino">Femenino</option>
                            <option value="Otro">Otro</option>
                        </select>
                        <label for="floatingSexo">Género <span
                                class="text-danger">*</span></label>
                        <div class="invalid-feedback">Seleccione un género.</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="form-floating">
                        <select class="form-select" id="floatingDelito"
                            value="{{vehiculos.Delito}}"
                            name="txtDelito" required>
                            <option value disabled selected>Seleccionar Tipo de
                                Delito</option>
                            <option value="Robo">Robo</option>
                            <option value="Hurto">Hurto</option>
                        </select>
                        <label for="floatingDelito">Tipo de Delito <span
                                class="text-danger">*</span></label>
                        <div class="invalid-feedback">Seleccione un tipo de
                            delito.</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="form-floating">
                        <select class="form-select" id="floatingVehiculo"
                            name="txtVehiculo" required>
                            <option value disabled selected>Seleccionar Tipo de
                                Vehículo</option>
                            <option value="Motocicleta">Motocicleta</option>
                            <option value="Cuatrimoto">Cuatrimoto</option>
                            <option value="Automovil">Automovil</option>
                            <option value="Pick-Up">Pick-Up</option>
                            <option value="Camioneta">Camioneta</option>
                            <option value="Camion">Camion</option>
                            <option value="Rastra">Rastra</option>
                            <option value="Cabezal">Cabezal</option>
                            <option value="Tractor">Tractor</option>
                            <option value="Otro">Otro</option>
                            <!-- Agrega más opciones de vehículos terrestres aquí -->
                        </select>
                        <label for="floatingVehiculo">Tipo de Vehículo <span
                                class="text-danger">*</span></label>
                        <div class="invalid-feedback">Seleccione un tipo de
                            vehículo.</div>
                    </div>
                </div>
            </div>
            <!-- Cuarta Fila -->
            <div class="form-row ">
                <div class="col-md-3">
                    <div class="form-floating">
                        <input type="text" class="form-control"
                            id="floatingPlaca" name="txtPlaca"
                            value="{{vehiculos.Placa}}"
                            placeholder="Ejemplo: P-123FFS"
                            pattern="^[A-Za-z0-9\s-]+$|^$">
                        <label for="floatingPlaca">Placa</label>
                        <div class="invalid-feedback">Ingrese una placa válida
                            (letras, números, espacios y guiones).</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="form-floating">
                        <input type="text" class="form-control"
                            id="floatingModelo" name="txtModelo"
                            value="{{vehiculos.Modelo}}"
                            placeholder="Ejemplo: 2023"
                            pattern="^\d{4}$|^$"
                            required>
                        <label for="floatingModelo">Modelo (Año)</label>
                        <div class="invalid-feedback">Ingrese un modelo válido
                            de 4 dígitos (ej. 2023) o deje este campo vacío.</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="form-floating">
                        <input type="text" class="form-control"
                            id="floatingMarca" name="txtMarca"
                            value="{{vehiculos.Marca}}"
                            placeholder="Ejemplo: Toyota"
                            pattern="^[A-Za-z0-9\s]+$|^$"
                            required>
                        <label for="floatingMarca">Marca</label>
                        <div class="invalid-feedback">Ingrese una marca válida
                            (solo letras, números y espacios) o deje este campo
                            vacío.</div>
                    </div>
                </div>
            </div>
            <!--Quinta Fila-->
            <div class="form-row ">
                <div class="col-md-3">
                    <div class="form-floating">
                        <input type="text" class="form-control"
                            id="floatingColor"
                            value="{{vehiculos.Color}}"
                            name="txtColor"
                            placeholder="Ejemplo: Rojo"
                            pattern="^[A-Za-z\s]+$|^$"
                            required>
                        <label for="floatingColor">Color</label>
                        <div class="invalid-feedback">Ingrese un color válido
                            (solo letras y espacios) o deje este campo vacío.</div>
                    </div>
                </div>
                <div class="col-md-3">

                </div>
                <div class="col-md-3">
                    <!--Nueva Caja-->
                </div>
            </div>
            <!--Botones-->
            <div>
                <button type="submit" class="btn btn-primary">Actualizar</button>
                <a href="/vehiculos" class="btn btn-secondary">Cancelar</a>

                {% with messages = get_flashed_messages() %}
                {% if messages %}
                <div class="alert alert-info"
                    style="margin: 20px 0; text-align: center;">
                    {% for message in messages %}
                    {{ message }}
                    {% endfor %}
                </div>
                {% endif %}
                {% endwith %}

            </div>
        </form>
    </div>
    <div class="container">

    </div>
</div>

<!-- Validación de campos js -->
<script
    src="{{ url_for('static', filename='javascript/validacion_Incidencia.js') }}">
</script>

<!--Validacion de Listas js-->
<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Obtén el valor del género de la base de datos (por ejemplo, "Masculino")
        var sexoValue = "{{ vehiculos.Sexo }}";  // Asegúrate de tener este valor definido

        // Convertimos todo a minúsculas para comparar de manera insensible a mayúsculas/minúsculas
        sexoValue = sexoValue.toLowerCase();

        // Encuentra el elemento select
        var selectElement = document.getElementById('floatingSexo');

        // Recorre las opciones y selecciona la que coincide con el texto del género (insensible a mayúsculas/minúsculas)
        for (var i = 0; i < selectElement.options.length; i++) {
            if (selectElement.options[i].text.toLowerCase() === sexoValue) {
                selectElement.options[i].selected = true;
                break;
            }
        }

        // Imprime el valor en la consola
        console.log('Valor de sexoValue:', sexoValue);
    });
</script>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Obtén el valor del género de la base de datos (por ejemplo, "Masculino")
        var Value = "{{ vehiculos.Delito }}";  // Asegúrate de tener este valor definido

        // Convertimos todo a minúsculas para comparar de manera insensible a mayúsculas/minúsculas
        Value = Value.toLowerCase();

        // Encuentra el elemento select
        var selectElement = document.getElementById('floatingDelito');

        // Recorre las opciones y selecciona la que coincide con el texto del género (insensible a mayúsculas/minúsculas)
        for (var i = 0; i < selectElement.options.length; i++) {
            if (selectElement.options[i].text.toLowerCase() === Value) {
                selectElement.options[i].selected = true;
                break;
            }
        }

        // Imprime el valor en la consola
        console.log('Delito:', Value);
    });
</script>

<script>
document.addEventListener('DOMContentLoaded', function () {
    // Obtén el valor del tipo de vehículo de la base de datos (por ejemplo, "Moto de Agua")
    var tipoVehiculo = "{{ vehiculos.Tipo }}";  // Asegúrate de tener este valor definido

    // Convertimos todo a minúsculas y eliminamos guiones y espacios para comparar de manera más flexible
    var tipoVehiculoNormalized = tipoVehiculo.toLowerCase().replace(/[-\s]/g, '');

    // Encuentra el elemento select
    var selectElement = document.getElementById('floatingVehiculo');

    // Recorre las opciones y selecciona la que coincide con el texto del tipo de vehículo (insensible a mayúsculas/minúsculas y sin guiones y espacios)
    for (var i = 0; i < selectElement.options.length; i++) {
        var optionTextNormalized = selectElement.options[i].text.toLowerCase().replace(/[-\s]/g, '');
        if (optionTextNormalized === tipoVehiculoNormalized) {
            selectElement.options[i].selected = true;
            break;
        }
    }

    // Imprime el valor en la consola
    console.log('Tipo de Vehículo:', tipoVehiculo);
});

</script>

<!---Bosotrap-->
<script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"
    integrity="sha384-cm1FJCxeSri3l3z8nZea5T1MIg4Jy5c5fF5mi1rnl4g1by5Jp5FEh3Os2R5h5jJs6"
    crossorigin="anonymous"></script>

{% endblock %}